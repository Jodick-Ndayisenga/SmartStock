// models/AccountTransaction.ts
import { field, relation } from '@nozbe/watermelondb/decorators';
import { BaseModel } from './BaseModel';

export class AccountTransaction extends BaseModel {
  static table = 'account_transactions';

  @field('shop_id') shopId!: string;
  @field('cash_account_id') cashAccountId!: string;
  @field('transaction_id') transactionId?: string;
  @field('payment_id') paymentId?: string;
  @field('type') type!: string;
  @field('amount') amount!: number;
  @field('balance_before') balanceBefore!: number;
  @field('balance_after') balanceAfter!: number;
  @field('description') description!: string;
  @field('category') category?: string;
  @field('reference') reference?: string;
  @field('notes') notes?: string;
  @field('transaction_date') transactionDate!: number;
  @field('recorded_by') recordedBy!: string;

  // Relations
  @relation('cash_accounts', 'cash_account_id') cashAccount;
  @relation('transactions', 'transaction_id') transaction;
  @relation('payments', 'payment_id') payment;
}



// models/CashAccount.ts
import { field } from '@nozbe/watermelondb/decorators';
import { BaseModel } from './BaseModel';

export class CashAccount extends BaseModel {
  static table = 'cash_accounts';

  static associations = {
    payments: { type: 'has_many', foreignKey: 'cash_account_id' },
    account_transactions: { type: 'has_many', foreignKey: 'cash_account_id' },
  } as const;

  @field('shop_id') shopId!: string; // ‚Üê Fixed: added !
  @field('name') name!: string;
  @field('type') type!: 'cash' | 'bank_account' | 'mobile_money' | 'credit_card' | 'petty_cash';
  @field('account_number') accountNumber?: string;
  @field('bank_name') bankName?: string;
  @field('current_balance') currentBalance!: number;
  @field('opening_balance') openingBalance!: number;
  @field('currency') currency!: string;
  @field('is_active') isActive!: boolean;
  @field('is_default') isDefault!: boolean;
  @field('notes') notes?: string;
}


import {  Relation } from '@nozbe/watermelondb';
import { relation, field } from '@nozbe/watermelondb/decorators';
import { BaseModel } from './BaseModel';

export default class ExpenseCategory extends BaseModel {
  static table = 'expense_categories';
  
  static associations = {
    transactions: { type: 'has_many', foreignKey: 'expense_category_id' },
  } as const;

  @field('shop_id') shopId!: string;
  @field('name') name!: string;
  @field('description') description?: string;
  @field('parent_category_id') parentCategoryId?: string;
  @field('is_active') isActive!: boolean;
  @relation('expense_categories', 'parent_category_id') parentCategory?: Relation<ExpenseCategory>;
}